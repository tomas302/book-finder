(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,a){e.exports=a(78)},43:function(e,t,a){},45:function(e,t,a){},67:function(e,t,a){},70:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(10),s=a.n(l),i=(a(43),a(44),a(12)),c=a(13),o=a(15),u=a(14),h=a(3),d=a(16),p=a(90),m=a(94),f=a(92),S=a(91),g=(a(45),a(21)),y=a.n(g),b=a(33),k=a(34),v=a.n(k),w=function(){var e=Object(b.a)(y.a.mark(function e(t){var a,n,r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://www.googleapis.com/books/v1/volumes?q="+t.replace(" ","+"),a+="&key=AIzaSyD_IFTjUwNSb_GWrmlu6PbQfHsM7Oafkdc",a+="&projection=lite&printType=books&orderBy=relevance",e.next=5,v.a.get(a).then(function(e){n=e.data.items}).catch(function(e){r=e});case 5:if(!r){e.next=7;break}throw r;case 7:return n||(n=[]),e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),E=a(79),Q=a(80),C=a(81),O=a(82),j=a(83),T=a(84),A=a(93),I=a(36),N=(a(67),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleKeyDown=function(e){var t,n;switch(e.key){case"Enter":-1!==a.state.pastQuerySelected?a.handlePastQueryClick(a.state.pastQuerySelected):(a.props.onSearchHandle(),a.setState({focused:!1}));break;case"ArrowDown":if(e.preventDefault(),n=(n=(t=a.getLastQueries(!1)).reduce(function(e,t,a){return null!==t?e+(0!==e.length?"/":"")+a:e},"")).split("/").map(function(e){return+e}),-1===a.state.pastQuerySelected||a.state.pastQuerySelected===n[n.length-1])a.setState({pastQuerySelected:n[0]});else{for(var r=a.state.pastQuerySelected+1,l=0;l<t.length&&(r===t.length&&(r=0),!n.includes(r));l++)r++;a.setState({pastQuerySelected:r})}break;case"ArrowUp":if(e.preventDefault(),n=(n=(t=a.getLastQueries(!1)).reduce(function(e,t,a){return null!==t?e+(0!==e.length?"/":"")+a:e},"")).split("/").map(function(e){return+e}),-1===a.state.pastQuerySelected)a.setState({pastQuerySelected:n[0]});else if(0===a.state.pastQuerySelected)a.setState({pastQuerySelected:n[n.length-1]});else{for(var s=a.state.pastQuerySelected-1,i=0;i<t.length&&(-1===s&&(s=t.length-1),!n.includes(s));i++)s--;a.setState({pastQuerySelected:s})}break;default:-1!==a.state.pastQuerySelected&&a.setState({pastQuerySelected:-1})}},a.state={focused:!1,pastQuerySelected:-1,last10Queries:localStorage.getItem("last10Queries").split("/")},a.handleKeyDown=a.handleKeyDown.bind(Object(h.a)(a)),a.handlePastQueryClick=a.handlePastQueryClick.bind(Object(h.a)(a)),a.setWrapperRef=a.setWrapperRef.bind(Object(h.a)(a)),a.handleClickOutside=a.handleClickOutside.bind(Object(h.a)(a)),a.getLastQueries=a.getLastQueries.bind(Object(h.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"handlePastQueryClick",value:function(e){this.props.handlePastQueryClick(e),this.setState({focused:!1})}},{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"handleClickOutside",value:function(e){this.wrapperRef&&!this.wrapperRef.contains(e.target)?this.state.focused&&this.setState({focused:!1}):this.state.focused||this.setState({focused:!0})}},{key:"getLastQueries",value:function(e){var t=this,a=localStorage.getItem("last10Queries");if(""===a)return[];a=a.split("/");for(var n=function(n){""===t.props.value||a[n].includes(t.props.value)?n===t.state.pastQuerySelected?e&&(a[n]=r.a.createElement(E.a,{active:!0,onClick:function(){return t.handlePastQueryClick(n)},key:n},a[n])):e&&(a[n]=r.a.createElement(E.a,{onClick:function(){return t.handlePastQueryClick(n)},key:n},a[n])):a[n]=null},l=0;l<a.length;l++)n(l);return e&&a.push(r.a.createElement(E.a,{style:{color:"blue",textDecoration:"underline"},onClick:function(){localStorage.setItem("last10Queries",""),t.setState({focused:!1})},key:a.length},"Clear history...")),a}},{key:"render",value:function(){var e=this.getLastQueries(!0),t=0===e.length?null:r.a.createElement(Q.a,{isOpen:this.state.focused,toggle:function(){}},r.a.createElement(C.a,{style:{display:"none"}}),r.a.createElement(O.a,{className:"search-dropdown"},e));return r.a.createElement("div",{ref:this.setWrapperRef},r.a.createElement(j.a,null,r.a.createElement(T.a,{className:"search-bar-input",value:this.props.value,onKeyDown:this.handleKeyDown,onChange:this.props.onChangeHandle,placeholder:"Search by book title or author..."}),r.a.createElement(A.a,{addonType:"append",className:"search-bar-cross"},r.a.createElement(I.a,{onClick:this.props.clearHandle,close:!0})),r.a.createElement(A.a,{addonType:"append"},r.a.createElement(I.a,{onClick:this.props.onSearchHandle,className:"search-bar-button",color:"success"},"Search"))),t)}}]),t}(r.a.Component)),F=a(85),P=a(86),D=a(87),L=a(88),x=a(89),B=(a(70),function(e){return r.a.createElement(F.a,{className:"book-card"},r.a.createElement(P.a,{width:200,src:e.image}),r.a.createElement(D.a,null,r.a.createElement(L.a,null,r.a.createElement("b",null,e.title)),r.a.createElement(x.a,null,"By: ",e.author,r.a.createElement("br",null),"Published by: ",e.publisher),r.a.createElement(I.a,{color:"success",className:"btn-lg",onClick:function(){return window.open(e.link,"_blank")}},"See this Book")))}),H=function(e){for(var t=[],a=0;a<e.books.length;a++){var n=e.books[a].volumeInfo,l=n.imageLinks?n.imageLinks.thumbnail:"http://www.51allout.co.uk/wp-content/uploads/2012/02/Image-not-found.gif",s=n.title,i=void 0!==n.authors?n.authors[0]:"Unknown",c=n.publisher?n.publisher:"Unknown",o=n.infoLink;t.push(r.a.createElement(p.a,{xs:"12",lg:"6",key:a},r.a.createElement(B,{image:l,title:s,author:i,publisher:c,link:o})))}return r.a.createElement(S.a,{style:{marginBottom:50}},t)},R=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={waitingForApi:!1,books:[],searchValue:"",valueSended:"",error:""},null===localStorage.getItem("last10Queries")&&localStorage.setItem("last10Queries",""),a.handleSearchBarChange=a.handleSearchBarChange.bind(Object(h.a)(a)),a.handleSearchSubmit=a.handleSearchSubmit.bind(Object(h.a)(a)),a.handleClearSearch=a.handleClearSearch.bind(Object(h.a)(a)),a.addNewQuery=a.addNewQuery.bind(Object(h.a)(a)),a.handlePastQueryClick=a.handlePastQueryClick.bind(Object(h.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleSearchBarChange",value:function(e){var t=e.target.value.replace(/[^\w\s\-_,.;:()]+/g,"");this.setState({searchValue:t})}},{key:"handleSearchSubmit",value:function(e){var t=this,a=void 0!==e?e:this.state.searchValue;a===this.state.valueSended||this.state.waitingForApi||(""!==a?(""!==this.state.error&&this.setState({error:""}),this.setState({valueSended:a,waitingForApi:!0}),w(a).then(function(e){t.state.waitingForApi&&(t.addNewQuery(),t.setState({books:e,waitingForApi:!1}),t.currentTimeout&&clearTimeout(t.currentTimeout))}).catch(function(e){t.state.waitingForApi&&(t.setState({error:e,waitingForApi:!1,valueSended:""}),t.currentTimeout&&clearTimeout(t.currentTimeout))}),this.currentTimeout&&clearTimeout(this.currentTimeout),this.currentTimeout=setTimeout(function(){t.state.waitingForApi&&t.setState({waitingForApi:!1,error:"Timed out",valueSended:""})},5e3)):this.setState({valueSended:"",waitingForApi:!1}))}},{key:"handleClearSearch",value:function(){this.setState({waitingForApi:!1,books:[],searchValue:"",valueSended:"",error:""})}},{key:"addNewQuery",value:function(){var e=this,t=localStorage.getItem("last10Queries").split("/");t.some(function(a,n){if(a===e.state.valueSended)return a=a.replace(/[^\w\s\-_,.;:()]+/g,""),t.splice(n,1),t.unshift(a),localStorage.setItem("last10Queries",t.join("/").replace(/[\/]$/,"")),!0;return!1})||(10===t.length&&t.pop(),t.unshift(this.state.valueSended),localStorage.setItem("last10Queries",t.join("/").replace(/[\/]$/,"")))}},{key:"handlePastQueryClick",value:function(e){var t=localStorage.getItem("last10Queries").split("/")[e].replace(/[^\w\s\-_,.;:()]+/g,"");this.setState({searchValue:t}),this.handleSearchSubmit(t)}},{key:"render",value:function(){var e;if(""!==this.state.error){var t="There was an error";"Timed out"===this.state.error&&(t="Error: cannot reach the server"),e=r.a.createElement(p.a,{xs:"12"},r.a.createElement(m.a,{color:"danger"},r.a.createElement("h3",null,t)))}else e=this.state.waitingForApi?r.a.createElement(p.a,{xs:"12"},r.a.createElement(m.a,{color:"secondary"},r.a.createElement("h3",null,r.a.createElement("i",{className:"fas fa-spinner"})," Loading..."))):0===this.state.books.length?""!==this.state.valueSended?r.a.createElement(p.a,{xs:"12"},r.a.createElement(m.a,{color:"warning"},r.a.createElement("h3",null,"Nothing found"))):r.a.createElement(p.a,{xs:"12"},r.a.createElement(m.a,{color:"primary"},r.a.createElement("h3",null,"Type something"))):r.a.createElement(H,{books:this.state.books});return r.a.createElement("div",{className:"App"},r.a.createElement(f.a,null,r.a.createElement(S.a,null,r.a.createElement(p.a,null,r.a.createElement("h1",null,"BOOK FINDER"))),r.a.createElement(S.a,null,r.a.createElement(p.a,{xs:"12",md:{size:10,offset:1}},r.a.createElement(N,{value:this.state.searchValue,onChangeHandle:this.handleSearchBarChange,onSearchHandle:this.handleSearchSubmit,clearHandle:this.handleClearSearch,handlePastQueryClick:this.handlePastQueryClick}))),r.a.createElement(S.a,null,e)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,1,2]]]);
//# sourceMappingURL=main.f8bca709.chunk.js.map